<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chat Widget Demo - Embeddable Chat Widget</title>
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Oxygen, Ubuntu, Cantarell, sans-serif;
        line-height: 1.6;
        color: #333;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
      }

      .container {
        background: white;
        border-radius: 12px;
        padding: 40px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
      }

      h1 {
        color: #2c3e50;
        margin-bottom: 30px;
        text-align: center;
      }

      .demo-section {
        margin: 40px 0;
        padding: 30px;
        background: #f8f9fa;
        border-radius: 8px;
        border-left: 4px solid #3b82f6;
      }

      .code-block {
        background: #2d3748;
        color: #e2e8f0;
        padding: 20px;
        border-radius: 8px;
        overflow-x: auto;
        margin: 20px 0;
        font-family: "Monaco", "Consolas", monospace;
        font-size: 14px;
      }

      .feature-list {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin: 30px 0;
      }

      .feature-item {
        padding: 20px;
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      .feature-item h3 {
        color: #3b82f6;
        margin-top: 0;
      }

      .button-demo {
        display: flex;
        gap: 15px;
        margin: 20px 0;
        flex-wrap: wrap;
      }

      .btn {
        padding: 10px 20px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
        transition: all 0.2s ease;
      }

      .btn-primary {
        background: #3b82f6;
        color: white;
      }

      .btn-primary:hover {
        background: #2563eb;
      }

      .btn-secondary {
        background: #6b7280;
        color: white;
      }

      .btn-secondary:hover {
        background: #4b5563;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üöÄ Chat Widget Demo</h1>

      <p>
        Welcome to the interactive demo of our embeddable chat widget! This
        widget is designed to be easily integrated into any website with just a
        simple script tag.
      </p>

      <div class="demo-section">
        <h2>‚ú® Key Features</h2>
        <div class="feature-list">
          <div class="feature-item">
            <h3>üé® Customizable Design</h3>
            <p>
              Fully customizable colors, positioning, and messaging to match
              your brand.
            </p>
          </div>
          <div class="feature-item">
            <h3>üì± Mobile Responsive</h3>
            <p>
              Optimized for all screen sizes with touch-friendly interactions.
            </p>
          </div>
          <div class="feature-item">
            <h3>üíæ Persistent History</h3>
            <p>
              Chat history is saved locally and persists across page reloads.
            </p>
          </div>
          <div class="feature-item">
            <h3>üîå Easy Integration</h3>
            <p>
              ES module format with multiple loading options - no complex setup
              required.
            </p>
          </div>
          <div class="feature-item">
            <h3>‚ö° Lightweight</h3>
            <p>
              Single 19.25 kB file (5.14 kB gzipped) with CSS bundled inline.
            </p>
          </div>
          <div class="feature-item">
            <h3>üåê API Ready</h3>
            <p>
              Built-in support for custom API endpoints and real-time responses.
            </p>
          </div>
        </div>
      </div>

      <div class="demo-section">
        <h2>üí¨ Try it Out!</h2>
        <p>
          The chat widget is already loaded on this page! Look for the blue chat
          button in the bottom-right corner. Click it to start chatting!
        </p>

        <div class="button-demo">
          <button class="btn btn-primary" onclick="createNewWidget()">
            Create New Widget
          </button>
          <button class="btn btn-secondary" onclick="createLeftWidget()">
            Create Left Widget
          </button>
          <button class="btn btn-secondary" onclick="clearLocalStorage()">
            Clear Stored Messages
          </button>
        </div>
      </div>

      <div class="demo-section">
        <h2>üìã Basic Integration</h2>
        <p>Add the ES module script to your website:</p>
        <div class="code-block">
          &lt;script type="module"&gt; import { ChatWidget } from
          'https://cw-vanilla.pages.dev/chat-widget.js'; ChatWidget.init({
          title: 'Support Chat' }); &lt;/script&gt;
        </div>
      </div>

      <div class="demo-section">
        <h2>‚öôÔ∏è Advanced Configuration</h2>
        <p>Customize the widget with full configuration:</p>
        <div class="code-block">
          &lt;script type="module"&gt; import { ChatWidget } from
          'https://cw-vanilla.pages.dev/chat-widget.js'; ChatWidget.init({
          title: 'Customer Support', primaryColor: '#10b981', position:
          'bottom-left', apiEndpoint: 'https://api.example.com/chat',
          welcomeMessage: 'Hi! How can I help you today?', placeholder: 'Ask me
          anything...', width: 350, height: 500 }); &lt;/script&gt;
        </div>
      </div>

      <div class="demo-section">
        <h2>üõ†Ô∏è JavaScript API</h2>
        <p>Control the widget programmatically:</p>
        <div class="code-block">
          &lt;script type="module"&gt; // Import and initialize import {
          ChatWidget } from 'https://cw-vanilla.pages.dev/chat-widget.js'; const
          widget = ChatWidget.init({ title: 'Support Chat', primaryColor:
          '#3b82f6', position: 'bottom-right' }); // Widget is self-contained
          with built-in controls // Users click the toggle button to open/close
          // Message history is automatically persisted &lt;/script&gt;
        </div>
      </div>

      <div class="demo-section">
        <h2>üöÄ Deploy to Cloudflare</h2>
        <p>Ready to host on Cloudflare Pages:</p>
        <ol>
          <li>
            Run <code>npm run build</code> to create the production bundle
          </li>
          <li>Upload the <code>dist/</code> folder to Cloudflare Pages</li>
          <li>
            Your widget will be available at
            <code>https://your-domain.pages.dev/chat-widget.js</code>
          </li>
          <li>Use ES module import to embed the widget on any website</li>
          <li>
            Current live demo:
            <code>https://cw-vanilla.pages.dev/chat-widget.js</code>
          </li>
        </ol>
      </div>

      <div class="demo-section">
        <h2>üîÑ Alternative Loading Methods</h2>
        <p>Multiple ways to integrate the widget:</p>

        <h3>Method 1: Data Attributes (Auto-init)</h3>
        <div class="code-block">
          &lt;script type="module"
          src="https://cw-vanilla.pages.dev/chat-widget.js"
          data-auto-load="true" data-primary-color="#6366f1" data-title="Auto
          Chat"&gt; &lt;/script&gt;
        </div>

        <h3>Method 2: Dynamic Import</h3>
        <div class="code-block">
          &lt;script type="module"&gt; const { ChatWidget } = await
          import('https://cw-vanilla.pages.dev/chat-widget.js');
          ChatWidget.init({ title: 'Dynamic Chat' }); &lt;/script&gt;
        </div>

        <h3>Method 3: Async Script Loading</h3>
        <div class="code-block">
          &lt;script&gt; const script = document.createElement('script');
          script.type = 'module'; script.src =
          'https://cw-vanilla.pages.dev/chat-widget.js'; script.onload = ()
          =&gt; window.ChatWidget.init({ title: 'Async Chat' });
          document.head.appendChild(script); &lt;/script&gt;
        </div>
      </div>

      <footer
        style="
          margin-top: 60px;
          padding-top: 30px;
          border-top: 1px solid #e5e7eb;
          text-align: center;
          color: #6b7280;
        "
      >
        <p>
          Built with TypeScript, Vite, and ‚ù§Ô∏è ‚Ä¢ File Size: 19.25 kB (5.14 kB
          gzipped)
        </p>
      </footer>
    </div>

    <script type="module" src="/src/main.ts"></script>

    <script>
      // Demo functions for the buttons
      async function createNewWidget() {
        const { ChatWidget } = await import("/src/ChatWidget.ts");
        ChatWidget.init({
          primaryColor: "#10b981",
          title: "New Demo Widget",
          position: "bottom-right",
          welcomeMessage: "This is a newly created widget!",
        });
      }

      async function createLeftWidget() {
        const { ChatWidget } = await import("/src/ChatWidget.ts");
        ChatWidget.init({
          primaryColor: "#f59e0b",
          title: "Left Widget",
          position: "bottom-left",
          width: 300,
          height: 400,
          welcomeMessage: "I'm positioned on the left!",
        });
      }

      function clearLocalStorage() {
        // Clear all chat widget related localStorage
        const keys = Object.keys(localStorage);
        keys.forEach((key) => {
          if (key.startsWith("chat-widget-")) {
            localStorage.removeItem(key);
          }
        });
        alert("Stored messages cleared! Refresh the page to see the effect.");
      }
    </script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ES Module Chat Widget - All Methods</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 40px;
        background: #f5f5f5;
      }
      .container {
        max-width: 900px;
        margin: 0 auto;
        background: white;
        padding: 40px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      .header {
        text-align: center;
        margin-bottom: 40px;
      }
      h1 {
        color: #333;
        margin-bottom: 10px;
      }
      .method {
        margin: 30px 0;
        padding: 20px;
        border: 1px solid #e9ecef;
        border-radius: 8px;
        background: #f8f9fa;
      }
      .code {
        background: #2d3748;
        color: #e2e8f0;
        padding: 16px;
        border-radius: 6px;
        font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
        font-size: 14px;
        overflow-x: auto;
        margin: 10px 0;
      }
      .success {
        color: #28a745;
        font-weight: bold;
      }
      .info {
        background: #e7f3ff;
        border-left: 4px solid #2196f3;
        padding: 16px;
        margin: 20px 0;
      }
      .button {
        background: #007bff;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
        margin: 10px 5px;
      }
      .button:hover {
        background: #0056b3;
      }
      .status {
        margin: 20px 0;
        padding: 10px;
        border-radius: 4px;
        background: #f8f9fa;
        border: 1px solid #dee2e6;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>üöÄ ES Module Chat Widget</h1>
        <p>All working methods to load and use the chat widget</p>
      </div>
      
      <div class="info">
        <strong>‚úÖ ES Module Advantages:</strong>
        <ul>
          <li>Better MIME type handling - no "Expected JavaScript module" errors</li>
          <li>Standard module loading</li>
          <li>Better browser compatibility</li>
          <li>Cleaner error handling</li>
        </ul>
      </div>
      
      <div class="method">
        <h3>Method 1: Direct Script Tag with type="module"</h3>
        <div class="code">
&lt;script type="module" src="./dist/chat-widget.js"&gt;&lt;/script&gt;
&lt;script&gt;
  window.ChatWidget.init({
    primaryColor: '#3b82f6',
    title: 'Direct Load Chat'
  });
&lt;/script&gt;
        </div>
        <p class="success">‚úÖ This method is used on this page</p>
      </div>
      
      <div class="method">
        <h3>Method 2: Auto-initialization via Data Attributes</h3>
        <div class="code">
&lt;script 
  type="module" 
  src="./dist/chat-widget.js"
  data-auto-load="true"
  data-primary-color="#28a745"
  data-title="Auto Chat"
  data-position="bottom-left"&gt;
&lt;/script&gt;
        </div>
        <button class="button" onclick="loadAutoWidget()">Test Auto Load</button>
      </div>
      
      <div class="method">
        <h3>Method 3: Dynamic Import (Modern Browsers)</h3>
        <div class="code">
&lt;script type="module"&gt;
  async function loadWidget() {
    try {
      const { ChatWidget } = await import('./dist/chat-widget.js');
      ChatWidget.init({
        primaryColor: '#dc3545',
        title: 'Dynamic Import Chat'
      });
    } catch (error) {
      console.error('Failed to load widget:', error);
    }
  }
  loadWidget();
&lt;/script&gt;
        </div>
        <button class="button" onclick="loadDynamicWidget()">Test Dynamic Import</button>
      </div>
      
      <div class="method">
        <h3>Method 4: Async Script Creation</h3>
        <div class="code">
&lt;script&gt;
  function loadChatWidget() {
    const script = document.createElement('script');
    script.type = 'module';
    script.src = './dist/chat-widget.js';
    script.onload = () =&gt; {
      window.ChatWidget.init({
        primaryColor: '#6f42c1',
        title: 'Async Loaded Chat'
      });
    };
    document.head.appendChild(script);
  }
  loadChatWidget();
&lt;/script&gt;
        </div>
        <button class="button" onclick="loadAsyncWidget()">Test Async Load</button>
      </div>
      
      <div class="status" id="status">
        Ready to test different loading methods...
      </div>
      
      <div class="info">
        <strong>üîß Configuration:</strong><br>
        Current widget: <strong>Direct Load</strong> with purple theme (#8b5cf6)<br>
        File size: <strong>19.25 kB (5.14 kB gzipped)</strong><br>
        Format: <strong>ES Module (.js)</strong>
      </div>
    </div>

    <!-- Method 1: Direct load with ES modules -->
    <script type="module" src="./dist/chat-widget.js"></script>
    
    <script>
      // Initialize the main widget for this page
      window.ChatWidget.init({
        primaryColor: '#8b5cf6',
        title: 'ES Module Demo',
        placeholder: 'Try the ES module widget...',
        position: 'bottom-right',
        width: 350,
        height: 500,
        welcomeMessage: 'üéâ Success! This widget is loaded via ES modules with no MIME type errors!'
      });
      
      // Test functions for other methods
      function updateStatus(message) {
        document.getElementById('status').innerHTML = message;
      }
      
      function loadAutoWidget() {
        // This would normally be done via script tag, but we'll simulate it
        const widget = window.ChatWidget.init({
          primaryColor: '#28a745',
          title: 'Auto Test',
          position: 'bottom-left',
          welcomeMessage: 'This simulates auto-initialization!'
        });
        updateStatus('‚úÖ Auto-initialization method tested!');
      }
      
      async function loadDynamicWidget() {
        try {
          // Dynamic import - this actually works in modern browsers
          const module = await import('./dist/chat-widget.js');
          const widget = module.ChatWidget.init({
            primaryColor: '#dc3545',
            title: 'Dynamic Import',
            position: 'bottom-left',
            width: 300,
            height: 400,
            welcomeMessage: 'Loaded via dynamic import!'
          });
          updateStatus('‚úÖ Dynamic import method tested!');
        } catch (error) {
          updateStatus('‚ùå Dynamic import failed: ' + error.message);
        }
      }
      
      function loadAsyncWidget() {
        // Create script element dynamically
        const script = document.createElement('script');
        script.type = 'module';
        script.src = './dist/chat-widget.js';
        script.onload = () => {
          const widget = window.ChatWidget.init({
            primaryColor: '#6f42c1',
            title: 'Async Loaded',
            position: 'bottom-left',
            welcomeMessage: 'Loaded via async script creation!'
          });
          updateStatus('‚úÖ Async script creation method tested!');
        };
        script.onerror = () => {
          updateStatus('‚ùå Async script loading failed');
        };
        document.head.appendChild(script);
      }
    </script>
  </body>
</html>